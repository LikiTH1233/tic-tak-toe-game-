{"version":3,"sources":["script.js"],"names":["cell","socket","io","playerNameInput","document","getElementById","createBtn","joinBtn","roomInput","nameScreen","roomScreen","roomInfo","scoreboard","boardDiv","restartBtn","modal","modalMsg","chatContainer","chatBox","chatInput","sendBtn","switchRequestContainer","switchRequestMsg","acceptSwitchBtn","declineSwitchBtn","roomId","myName","players","dataset","index","i","appendChild","classList","add","querySelectorAll","addEventListener","showBoard","message","style","display","currentPlayer","textContent","gameOverMsg","innerHTML","updateScoreboard","name","p","symbol","score","join","value","trim","emit","alert","id","cells","forEach","mySymbol","playAgainBtn","msg","on","_ref","msgDiv","createElement","scrollHeight","scrollTop","switchBtn","_ref2","from","concat","accepted","_ref3","pl","me","_ref4","_ref5","data","_ref6","board","toggle"],"mappings":"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","file":"script.min.js","sourcesContent":["const socket = io();\r\n\r\n// DOM Elements\r\nconst playerNameInput = document.getElementById(\"playerName\");\r\nconst createBtn = document.getElementById(\"createBtn\");\r\nconst joinBtn = document.getElementById(\"joinBtn\");\r\nconst roomInput = document.getElementById(\"roomInput\");\r\nconst nameScreen = document.getElementById(\"nameScreen\");\r\nconst roomScreen = document.getElementById(\"roomScreen\");\r\nconst roomInfo = document.getElementById(\"roomInfo\");\r\nconst scoreboard = document.getElementById(\"scoreboard\");\r\nconst boardDiv = document.getElementById(\"board\");\r\nconst restartBtn = document.getElementById(\"restartBtn\");\r\nconst modal = document.getElementById(\"modal\");\r\nconst modalMsg = document.getElementById(\"modalMsg\");\r\nconst playAgainBtn = document.getElementById(\"playAgainBtn\");\r\n\r\nconst chatContainer = document.getElementById(\"chatContainer\");\r\nconst chatBox = document.getElementById(\"chatBox\");\r\nconst chatInput = document.getElementById(\"chatInput\");\r\nconst sendBtn = document.getElementById(\"sendBtn\");\r\n\r\nconst switchBtn = document.getElementById(\"switchBtn\");\r\nconst switchRequestContainer = document.getElementById(\"switchRequestContainer\");\r\nconst switchRequestMsg = document.getElementById(\"switchRequestMsg\");\r\nconst acceptSwitchBtn = document.getElementById(\"acceptSwitchBtn\");\r\nconst declineSwitchBtn = document.getElementById(\"declineSwitchBtn\");\r\n\r\nlet roomId = null;\r\nlet mySymbol = null;\r\nlet myName = null;\r\nlet players = [];\r\n\r\n// Create 9 board cells\r\nfor (let i = 0; i < 9; i++) {\r\n  const cell = document.createElement(\"div\");\r\n  cell.classList.add(\"cell\");\r\n  cell.dataset.index = i;\r\n  boardDiv.appendChild(cell);\r\n}\r\nconst cells = document.querySelectorAll(\".cell\");\r\n\r\n// --------- BUTTON EVENTS ---------\r\ncreateBtn.addEventListener(\"click\", () => {\r\n  const name = playerNameInput.value.trim();\r\n  if (!name) return alert(\"Enter your name!\");\r\n  myName = name;\r\n  socket.emit(\"createRoom\", { name });\r\n});\r\n\r\njoinBtn.addEventListener(\"click\", () => {\r\n  const name = playerNameInput.value.trim();\r\n  const id = roomInput.value.trim();\r\n  if (!name || !id) return alert(\"Enter name and room ID!\");\r\n  myName = name;\r\n  socket.emit(\"joinRoom\", { name, roomId: id });\r\n});\r\n\r\n// Game board click\r\ncells.forEach(cell => {\r\n  cell.addEventListener(\"click\", () => {\r\n    if (!roomId || !mySymbol) return;\r\n    socket.emit(\"makeMove\", { roomId, index: cell.dataset.index });\r\n  });\r\n});\r\n\r\n// Restart game\r\nrestartBtn.addEventListener(\"click\", () => {\r\n  socket.emit(\"restartGame\", roomId);\r\n});\r\n\r\nplayAgainBtn.addEventListener(\"click\", () => {\r\n  modal.style.display = \"none\";\r\n  socket.emit(\"restartGame\", roomId);\r\n});\r\n\r\n// --------- CHAT ---------\r\nsendBtn.addEventListener(\"click\", () => {\r\n  const msg = chatInput.value.trim();\r\n  if (!msg) return;\r\n  socket.emit(\"sendMessage\", { roomId, name: myName, message: msg });\r\n  chatInput.value = \"\";\r\n});\r\n\r\nsocket.on(\"receiveMessage\", ({ name, message }) => {\r\n  chatContainer.style.display = \"block\";\r\n  const msgDiv = document.createElement(\"div\");\r\n  msgDiv.textContent = `${name}: ${message}`;\r\n  chatBox.appendChild(msgDiv);\r\n  chatBox.scrollTop = chatBox.scrollHeight;\r\n});\r\n\r\n// --------- SWITCH SYMBOL FEATURE ---------\r\nswitchBtn.addEventListener(\"click\", () => {\r\n  socket.emit(\"requestSwitch\", { roomId, name: myName });\r\n});\r\n\r\nsocket.on(\"switchRequest\", ({ from }) => {\r\n  // Show switch request to the other player\r\n  if (switchRequestContainer) {\r\n    switchRequestMsg.textContent = `${from} wants to switch symbols.`;\r\n    switchRequestContainer.style.display = \"block\";\r\n  } else {\r\n    alert(`${from} wants to switch symbols.`); // fallback\r\n  }\r\n});\r\n\r\nacceptSwitchBtn.addEventListener(\"click\", () => {\r\n  socket.emit(\"switchResponse\", { roomId, accepted: true });\r\n  switchRequestContainer.style.display = \"none\";\r\n});\r\n\r\ndeclineSwitchBtn.addEventListener(\"click\", () => {\r\n  socket.emit(\"switchResponse\", { roomId, accepted: false });\r\n  switchRequestContainer.style.display = \"none\";\r\n});\r\n\r\nsocket.on(\"switchUpdate\", ({ message, players: pl }) => {\r\n  alert(message); // Optional\r\n  players = pl;\r\n\r\n  const me = players.find(p => p.id === socket.id);\r\n  if (me) mySymbol = me.symbol;\r\n\r\n  // Update UI after switch\r\n  updateScoreboard();\r\n  roomInfo.textContent = `Game Started! You are ${mySymbol}`;\r\n});\r\n\r\n// --------- SOCKET EVENTS ---------\r\nsocket.on(\"roomCreated\", ({ roomId: id, symbol }) => {\r\n  roomId = id;\r\n  mySymbol = symbol;\r\n  showBoard(`Room Created! Code: ${id} | You are ${mySymbol}`);\r\n});\r\n\r\nsocket.on(\"joinedRoom\", ({ roomId: id, symbol }) => {\r\n  roomId = id;\r\n  mySymbol = symbol;\r\n  showBoard(`Joined Room! You are ${mySymbol}`);\r\n});\r\n\r\nsocket.on(\"startGame\", (data) => {\r\n  players = data.players;\r\n  const me = players.find(p => p.name === myName);\r\n  if (me) mySymbol = me.symbol;\r\n  showBoard(`Game Started! You are ${mySymbol}`);\r\n  updateScoreboard();\r\n});\r\n\r\nsocket.on(\"updateBoard\", ({ board, currentPlayer, players: pl, gameOverMsg }) => {\r\n  players = pl;\r\n  cells.forEach((cell, i) => {\r\n    cell.textContent = board[i] || \"\";\r\n    cell.classList.toggle(\"taken\", !!board[i]);\r\n  });\r\n  updateScoreboard();\r\n  if (gameOverMsg) {\r\n    modal.style.display = \"flex\";\r\n    modalMsg.textContent = gameOverMsg;\r\n  }\r\n});\r\n\r\nsocket.on(\"errorMsg\", (msg) => alert(msg));\r\n\r\n// --------- HELPERS ---------\r\nfunction showBoard(message) {\r\n  nameScreen.style.display = \"none\";\r\n  roomScreen.style.display = \"block\";\r\n  roomInfo.textContent = message;\r\n  restartBtn.style.display = \"block\";\r\n  chatContainer.style.display = \"block\";\r\n}\r\n\r\nfunction updateScoreboard() {\r\n  scoreboard.innerHTML = players\r\n    .map(p => `${p.name} (${p.symbol}): ${p.score}`)\r\n    .join(\" | \");\r\n}\r\n"]}